{"version":3,"sources":["tiny-proxy.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","each","obj","fn","nth","call","iterate","keys","factory","Proxy","this","value","origin","_this","v","k","regex","RegExp","array","Array","object","getter","setter","arg","old","onchange","readOnly","get","set","undefined","bind","arguments","proxy","decorate","version","exports","module","define","amd","window"],"mappings":";;AAAA,YAIA,SAASA,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,cAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,OAahiB,SAAWkB,GAGV,QAASC,GAAKC,EAAKC,GAIlB,IAHA,GAAIC,GAAMF,EAAIb,OACVD,EAAI,KAECA,EAAIgB,GACRD,EAAGE,KAAKH,EAAKA,EAAId,GAAIA,MAAO,KAMlC,QAASkB,GAAQJ,EAAKC,GAKrB,MAJAF,GAAKP,OAAOa,KAAKL,GAAM,SAAUd,GAChC,MAAOe,GAAGE,KAAKH,EAAKA,EAAId,GAAIA,KAGtBc,EAlBR,GAAIM,GAAU,OAqBVC,EAAQ,WACX,QAASA,KACR7B,gBAAgB8B,KAAMD,GA+CvB,MA5CAzB,cAAayB,IACZb,IAAK,WACLe,MAAO,SAAkBC,GACxB,GAAIC,GAAQH,IAkCZ,OAhCAJ,GAAQM,EAAQ,SAAUE,EAAGC,GAC5B,GAAIC,GAAQF,YAAaG,QACrBC,EAAQJ,YAAaK,OACrBC,EAASN,YAAapB,QAEtB2B,EAAS,OACTC,EAAS,MAERN,IAAsB,kBAANF,GAETE,GAAUE,IAASE,GAO9BC,EAAS,WACR,MAAOT,GAAOG,IAGfO,EAAS,SAAgBC,GACxB,GAAIC,GAAMZ,EAAOG,EAEjBH,GAAOG,GAAKQ,EACZV,EAAMY,SAASD,EAAKD,IAGrB7B,OAAOC,eAAekB,EAAOE,EAAGF,EAAMa,UAAanC,YAAY,EAAMoC,IAAKN,IAAa9B,YAAY,EAAMoC,IAAKN,EAAQO,IAAKN,MAjB1GO,SAAbhB,EAAME,KACTF,EAAME,OAGPF,EAAME,GAAKP,EAAQI,EAAOG,GAAIF,EAAMa,SAAUb,EAAMY,WANpDZ,EAAME,GAAKD,EAAEgB,KAAKjB,EAAME,MAuBnBL,QAGRd,IAAK,WACLe,MAAO,gBAGDF,IAGRD,GAAU,SAAiBI,GAC1B,GAAIc,GAAWK,UAAU1C,QAAU,GAAsBwC,SAAjBE,UAAU,IAAmB,EAAQA,UAAU,GACnF5B,EAAK4B,UAAU1C,QAAU,GAAsBwC,SAAjBE,UAAU,GAAmB,KAAOA,UAAU,GAE5EC,EAAQ,GAAIvB,EAUhB,OARAf,QAAOC,eAAeqC,EAAO,YAAczC,YAAY,EAAOoC,IAAK,WACjE,MAAOD,MAGLvB,GAAoB,kBAAPA,KAChB6B,EAAMP,SAAWtB,GAGX6B,EAAMC,SAASrB,IAGvBJ,EAAQ0B,QAAU,QAGK,mBAAZC,SACVC,OAAOD,QAAU3B,EACW,kBAAX6B,SAAyBA,OAAOC,IACjDD,OAAO,WACN,MAAO7B,KAGRR,EAAOgC,MAAQxB,GAEI,mBAAX+B,QAAyBA,OAASvC","file":"tiny-proxy.min.js","sourcesContent":["\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Tiny Object proxy for Client or Server\n *\n * @author [object Object]\n * @copyright 2016\n * @license BSD-3-Clause\n * @link http://avoidwork.github.io/tiny-proxy\n * @version 1.1.0\n */\n(function (global) {\n\tvar factory = void 0;\n\n\tfunction each(obj, fn) {\n\t\tvar nth = obj.length,\n\t\t    i = -1;\n\n\t\twhile (++i < nth) {\n\t\t\tif (fn.call(obj, obj[i], i) === false) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction iterate(obj, fn) {\n\t\teach(Object.keys(obj), function (i) {\n\t\t\treturn fn.call(obj, obj[i], i);\n\t\t});\n\n\t\treturn obj;\n\t}\n\n\tvar Proxy = function () {\n\t\tfunction Proxy() {\n\t\t\t_classCallCheck(this, Proxy);\n\t\t}\n\n\t\t_createClass(Proxy, [{\n\t\t\tkey: \"decorate\",\n\t\t\tvalue: function decorate(origin) {\n\t\t\t\tvar _this = this;\n\n\t\t\t\titerate(origin, function (v, k) {\n\t\t\t\t\tvar regex = v instanceof RegExp,\n\t\t\t\t\t    array = v instanceof Array,\n\t\t\t\t\t    object = v instanceof Object;\n\n\t\t\t\t\tvar getter = void 0,\n\t\t\t\t\t    setter = void 0;\n\n\t\t\t\t\tif (!regex && typeof v === \"function\") {\n\t\t\t\t\t\t_this[k] = v.bind(_this[k]);\n\t\t\t\t\t} else if (!regex && !array && object) {\n\t\t\t\t\t\tif (_this[k] === undefined) {\n\t\t\t\t\t\t\t_this[k] = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_this[k] = factory(origin[k], _this.readOnly, _this.onchange);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgetter = function getter() {\n\t\t\t\t\t\t\treturn origin[k];\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tsetter = function setter(arg) {\n\t\t\t\t\t\t\tvar old = origin[k];\n\n\t\t\t\t\t\t\torigin[k] = arg;\n\t\t\t\t\t\t\t_this.onchange(old, arg);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tObject.defineProperty(_this, k, _this.readOnly ? { enumerable: true, get: getter } : { enumerable: true, get: getter, set: setter });\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"onchange\",\n\t\t\tvalue: function onchange() {}\n\t\t}]);\n\n\t\treturn Proxy;\n\t}();\n\n\tfactory = function factory(origin) {\n\t\tvar readOnly = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\tvar fn = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n\t\tvar proxy = new Proxy();\n\n\t\tObject.defineProperty(proxy, \"readOnly\", { enumerable: false, get: function get() {\n\t\t\t\treturn readOnly;\n\t\t\t} });\n\n\t\tif (fn && typeof fn === \"function\") {\n\t\t\tproxy.onchange = fn;\n\t\t}\n\n\t\treturn proxy.decorate(origin);\n\t};\n\n\tfactory.version = \"1.1.0\";\n\n\t// Node, AMD & window supported\n\tif (typeof exports !== \"undefined\") {\n\t\tmodule.exports = factory;\n\t} else if (typeof define === \"function\" && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn factory;\n\t\t});\n\t} else {\n\t\tglobal.proxy = factory;\n\t}\n})(typeof window !== \"undefined\" ? window : global);\n"]}